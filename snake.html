<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üêç Ram's Snake Game ‚Äî Nokia Edition</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #1a1a2e;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    font-family: 'Courier New', monospace;
    color: #9acd32;
    overflow: hidden;
  }
  .phone {
    background: #2c2c54;
    border-radius: 28px;
    padding: 20px;
    box-shadow: 0 0 40px rgba(154, 205, 50, 0.15), inset 0 0 20px rgba(0,0,0,0.5);
    border: 2px solid #3d3d6b;
    max-width: 400px;
    width: 95vw;
  }
  .screen {
    background: #0a2e0a;
    border-radius: 8px;
    padding: 10px;
    border: 3px solid #1a4a1a;
    box-shadow: inset 0 0 30px rgba(0,0,0,0.6);
  }
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 12px;
    color: #4a8a4a;
    margin-bottom: 6px;
    padding: 0 2px;
  }
  canvas {
    display: block;
    width: 100%;
    image-rendering: pixelated;
    border: 1px solid #1a4a1a;
  }
  .info {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
    font-size: 13px;
  }
  .controls {
    margin-top: 16px;
    display: grid;
    grid-template-areas:
      ". up ."
      "left . right"
      ". down .";
    grid-template-columns: 1fr 1fr 1fr;
    gap: 6px;
    max-width: 200px;
    margin-left: auto;
    margin-right: auto;
  }
  .ctrl-btn {
    background: #3d3d6b;
    border: 1px solid #5a5a8f;
    color: #9acd32;
    font-size: 20px;
    padding: 12px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    -webkit-user-select: none;
    touch-action: manipulation;
    transition: background 0.1s;
  }
  .ctrl-btn:active { background: #5a5a8f; }
  .ctrl-btn.up { grid-area: up; }
  .ctrl-btn.down { grid-area: down; }
  .ctrl-btn.left { grid-area: left; }
  .ctrl-btn.right { grid-area: right; }
  .action-row {
    margin-top: 12px;
    text-align: center;
  }
  .action-btn {
    background: #9acd32;
    color: #0a2e0a;
    border: none;
    padding: 10px 28px;
    border-radius: 20px;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    font-weight: bold;
    cursor: pointer;
    letter-spacing: 1px;
    transition: background 0.15s;
  }
  .action-btn:hover { background: #b8e65c; }
  .branding {
    text-align: center;
    margin-top: 14px;
    font-size: 11px;
    color: #5a5a8f;
    letter-spacing: 3px;
    text-transform: uppercase;
  }
  .overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: rgba(10, 46, 10, 0.92);
    text-align: center;
    line-height: 1.6;
    padding: 10px;
  }
  .overlay h2 { font-size: 18px; margin-bottom: 4px; }
  .overlay p { font-size: 12px; color: #4a8a4a; }
  .canvas-wrap { position: relative; }
  @media (max-width: 420px) {
    .phone { padding: 14px; border-radius: 20px; }
  }
</style>
</head>
<body>
<div class="phone">
  <div class="screen">
    <div class="header">
      <span>üêç SNAKE</span>
      <span id="level">LVL 1</span>
    </div>
    <div class="canvas-wrap">
      <canvas id="game" width="300" height="300"></canvas>
      <div class="overlay" id="startScreen">
        <h2>üêç SNAKE</h2>
        <p>Nokia Edition</p>
        <p style="margin-top:8px;color:#9acd32;">Press START or any arrow key</p>
      </div>
      <div class="overlay" id="gameOverScreen" style="display:none;">
        <h2>GAME OVER</h2>
        <p>Score: <span id="finalScore">0</span></p>
        <p>Best: <span id="bestScore">0</span></p>
        <p style="margin-top:8px;color:#9acd32;">Press START to retry</p>
      </div>
    </div>
    <div class="info">
      <span>ü•ö <span id="score">0</span></span>
      <span>üèÜ <span id="best">0</span></span>
    </div>
  </div>
  <div class="controls">
    <button class="ctrl-btn up" onclick="changeDir(0,-1)" aria-label="Up">‚ñ≤</button>
    <button class="ctrl-btn left" onclick="changeDir(-1,0)" aria-label="Left">‚óÄ</button>
    <button class="ctrl-btn right" onclick="changeDir(1,0)" aria-label="Right">‚ñ∂</button>
    <button class="ctrl-btn down" onclick="changeDir(0,1)" aria-label="Down">‚ñº</button>
  </div>
  <div class="action-row">
    <button class="action-btn" onclick="startGame()">START</button>
  </div>
  <div class="branding">Ram's Arcade</div>
</div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const GRID = 15;
const CELL = canvas.width / GRID;

let snake, dir, nextDir, food, score, best, speed, alive, gameLoop, started;

best = parseInt(localStorage.getItem('snakeBest') || '0', 10);
document.getElementById('best').textContent = best;
document.getElementById('bestScore').textContent = best;

function init() {
  const mid = Math.floor(GRID / 2);
  snake = [{ x: mid, y: mid }, { x: mid - 1, y: mid }, { x: mid - 2, y: mid }];
  dir = { x: 1, y: 0 };
  nextDir = { x: 1, y: 0 };
  score = 0;
  speed = 150;
  alive = true;
  placeFood();
  updateUI();
}

function placeFood() {
  let pos;
  do {
    pos = { x: Math.floor(Math.random() * GRID), y: Math.floor(Math.random() * GRID) };
  } while (snake.some(s => s.x === pos.x && s.y === pos.y));
  food = pos;
}

function updateUI() {
  document.getElementById('score').textContent = score;
  document.getElementById('level').textContent = 'LVL ' + (Math.floor(score / 5) + 1);
}

function draw() {
  // Background
  ctx.fillStyle = '#0a2e0a';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Grid lines (subtle)
  ctx.strokeStyle = '#0f3a0f';
  ctx.lineWidth = 0.5;
  for (let i = 0; i <= GRID; i++) {
    ctx.beginPath();
    ctx.moveTo(i * CELL, 0);
    ctx.lineTo(i * CELL, canvas.height);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(0, i * CELL);
    ctx.lineTo(canvas.width, i * CELL);
    ctx.stroke();
  }

  // Egg (food)
  const foodX = food.x * CELL + CELL / 2;
  const foodY = food.y * CELL + CELL / 2;
  ctx.fillStyle = '#FFFDE7';
  ctx.strokeStyle = '#FFD54F';
  ctx.lineWidth = 1;
  ctx.shadowColor = '#FFD54F';
  ctx.shadowBlur = 6;
  ctx.beginPath();
  ctx.ellipse(foodX, foodY, CELL / 3, CELL / 2.2, 0, 0, Math.PI * 2);
  ctx.fill();
  ctx.stroke();
  ctx.shadowBlur = 0;

  // Snake
  snake.forEach((seg, i) => {
    const brightness = 1 - (i / snake.length) * 0.5;
    const g = Math.round(205 * brightness);
    ctx.fillStyle = i === 0 ? '#9acd32' : `rgb(50, ${g}, 50)`;
    ctx.shadowColor = i === 0 ? '#9acd32' : 'transparent';
    ctx.shadowBlur = i === 0 ? 6 : 0;
    const pad = 1;
    ctx.fillRect(seg.x * CELL + pad, seg.y * CELL + pad, CELL - pad * 2, CELL - pad * 2);
  });
  ctx.shadowBlur = 0;

  // Eyes on head
  const head = snake[0];
  ctx.fillStyle = '#0a2e0a';
  const ex = head.x * CELL + CELL / 2;
  const ey = head.y * CELL + CELL / 2;
  const eOff = 3;
  if (dir.x === 1) { ctx.fillRect(ex + eOff, ey - 4, 3, 3); ctx.fillRect(ex + eOff, ey + 1, 3, 3); }
  else if (dir.x === -1) { ctx.fillRect(ex - eOff - 3, ey - 4, 3, 3); ctx.fillRect(ex - eOff - 3, ey + 1, 3, 3); }
  else if (dir.y === -1) { ctx.fillRect(ex - 4, ey - eOff - 3, 3, 3); ctx.fillRect(ex + 1, ey - eOff - 3, 3, 3); }
  else { ctx.fillRect(ex - 4, ey + eOff, 3, 3); ctx.fillRect(ex + 1, ey + eOff, 3, 3); }
}

function step() {
  if (!alive) return;

  dir = { ...nextDir };
  const head = { x: snake[0].x + dir.x, y: snake[0].y + dir.y };

  // Wall collision
  if (head.x < 0 || head.x >= GRID || head.y < 0 || head.y >= GRID) { gameOver(); return; }

  // Self collision
  if (snake.some(s => s.x === head.x && s.y === head.y)) { gameOver(); return; }

  snake.unshift(head);

  if (head.x === food.x && head.y === food.y) {
    score++;
    updateUI();
    placeFood();
    // Speed up every 5 points
    if (score % 5 === 0 && speed > 60) {
      speed -= 15;
      clearInterval(gameLoop);
      gameLoop = setInterval(step, speed);
    }
  } else {
    snake.pop();
  }

  draw();
}

function gameOver() {
  alive = false;
  clearInterval(gameLoop);
  if (score > best) {
    best = score;
    localStorage.setItem('snakeBest', best);
    document.getElementById('best').textContent = best;
    document.getElementById('bestScore').textContent = best;
  }
  document.getElementById('finalScore').textContent = score;
  document.getElementById('gameOverScreen').style.display = 'flex';
}

function startGame() {
  document.getElementById('startScreen').style.display = 'none';
  document.getElementById('gameOverScreen').style.display = 'none';
  started = true;
  init();
  draw();
  clearInterval(gameLoop);
  gameLoop = setInterval(step, speed);
}

function changeDir(x, y) {
  // Prevent reversing into yourself
  if (dir.x === -x && dir.y === -y) return;
  // Don't allow diagonal (shouldn't happen but safety)
  if (x !== 0 && y !== 0) return;
  nextDir = { x, y };
  // Auto-start on first direction press
  if (!started) startGame();
}

// Keyboard controls
document.addEventListener('keydown', e => {
  switch (e.key) {
    case 'ArrowUp':    case 'w': case 'W': e.preventDefault(); changeDir(0, -1); break;
    case 'ArrowDown':  case 's': case 'S': e.preventDefault(); changeDir(0, 1);  break;
    case 'ArrowLeft':  case 'a': case 'A': e.preventDefault(); changeDir(-1, 0); break;
    case 'ArrowRight': case 'd': case 'D': e.preventDefault(); changeDir(1, 0);  break;
    case 'Enter': case ' ': e.preventDefault(); if (!alive || !started) startGame(); break;
  }
});

// Swipe controls for mobile
let touchStartX = 0, touchStartY = 0;
canvas.addEventListener('touchstart', e => {
  touchStartX = e.touches[0].clientX;
  touchStartY = e.touches[0].clientY;
}, { passive: true });
canvas.addEventListener('touchend', e => {
  const dx = e.changedTouches[0].clientX - touchStartX;
  const dy = e.changedTouches[0].clientY - touchStartY;
  if (Math.abs(dx) < 10 && Math.abs(dy) < 10) return;
  if (Math.abs(dx) > Math.abs(dy)) {
    changeDir(dx > 0 ? 1 : -1, 0);
  } else {
    changeDir(0, dy > 0 ? 1 : -1);
  }
}, { passive: true });

// Initial draw
init();
draw();
</script>
</body>
</html>
